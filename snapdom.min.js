(()=>{var De=Object.defineProperty;var Y=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var ue=(e,t,r)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,R=(e,t)=>{for(var r in t||(t={}))he.call(t,r)&&ue(e,r,t[r]);if(Y)for(var r of Y(t))ge.call(t,r)&&ue(e,r,t[r]);return e};var oe=(e,t)=>{var r={};for(var l in e)he.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(e!=null&&Y)for(var l of Y(e))t.indexOf(l)<0&&ge.call(e,l)&&(r[l]=e[l]);return r};var g=(e,t,r)=>new Promise((l,d)=>{var n=c=>{try{s(r.next(c))}catch(o){d(o)}},a=c=>{try{s(r.throw(c))}catch(o){d(o)}},s=c=>c.done?l(c.value):Promise.resolve(c.value).then(n,a);s((r=r.apply(e,t)).next())});var f={image:new Map,background:new Map,resource:new Map,defaultStyle:new Map,baseStyle:new Map,computedStyle:new WeakMap,font:new Set,snapshot:new WeakMap,snapshotKey:new Map,preStyleMap:new Map,preStyle:new WeakMap,preNodeMap:new Map,reset:Oe};function Oe(){f.computedStyle=new WeakMap,f.snapshot=new WeakMap,f.snapshotKey.clear(),f.preStyleMap.clear(),f.preStyle=new WeakMap,f.preNodeMap.clear()}var je=["div","span","p","a","img","ul","li","button","input","select","textarea","label","section","article","header","footer","nav","main","aside","h1","h2","h3","h4","h5","h6","svg","path","circle","rect","line","g","table","thead","tbody","tr","td","th"];function ye(){for(let e of je)we(e)}function we(e){if(f.defaultStyle.has(e))return f.defaultStyle.get(e);if(new Set(["script","style","meta","link","noscript","template","defs","symbol","title","metadata","desc"]).has(e)){let a={};return f.defaultStyle.set(e,a),a}let r=document.getElementById("snapdom-sandbox");r||(r=document.createElement("div"),r.id="snapdom-sandbox",r.style.position="absolute",r.style.left="-9999px",r.style.top="-9999px",r.style.width="0",r.style.height="0",r.style.overflow="hidden",document.body.appendChild(r));let l=document.createElement(e);l.style.all="initial",r.appendChild(l);let d=getComputedStyle(l),n={};for(let a of d)n[a]=d.getPropertyValue(a);return r.removeChild(l),f.defaultStyle.set(e,n),n}var Ve=new Set(["-webkit-locale"]);function _(e,t,r=!1){let l=[],d=we(t);for(let[n,a]of Object.entries(e))if(!Ve.has(n))if(!r)a&&l.push(`${n}:${a}`);else{let s=d[n];a&&a!==s&&l.push(`${n}:${a}`)}return l.sort().join(";")}function be(e){let t=new Set;return e.nodeType!==Node.ELEMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE?[]:(e.tagName&&t.add(e.tagName.toLowerCase()),typeof e.querySelectorAll=="function"&&e.querySelectorAll("*").forEach(r=>t.add(r.tagName.toLowerCase())),Array.from(t))}function Se(e){let t=new Map;for(let l of e){let d=f.defaultStyle.get(l);if(!d)continue;let n=Object.entries(d).map(([a,s])=>`${a}:${s};`).sort().join("");t.has(n)||t.set(n,[]),t.get(n).push(l)}let r="";for(let[l,d]of t.entries())r+=`${d.join(",")} { ${l} }
`;return r}function xe(){let e=new Set(f.preStyleMap.values()),t=new Map,r=1;for(let l of e)l.trim()&&t.set(l,`c${r++}`);return t}function W(r){return g(this,arguments,function*(e,t={}){let l=q(e),d=/^((repeating-)?(linear|radial|conic)-gradient)\(/i.test(e);if(l){let n=G(l);if(f.background.has(n))return t.skipInline?void 0:`url(${f.background.get(n)})`;{let a=yield P(n,{useProxy:t.useProxy});return f.background.set(n,a),t.skipInline?void 0:`url("${a}")`}}return e})}function D(e,{fast:t=!1}={}){if(t)return e();"requestIdleCallback"in window?requestIdleCallback(e,{timeout:50}):setTimeout(e,1)}function A(e,t=null){if(!(e instanceof Element))return window.getComputedStyle(e,t);let r=f.computedStyle.get(e);if(r||(r=new Map,f.computedStyle.set(e,r)),!r.has(t)){let l=window.getComputedStyle(e,t);r.set(t,l)}return r.get(t)}function Ce(e){let t=e.replace(/^['"]|['"]$/g,"");if(t.startsWith("\\"))try{return String.fromCharCode(parseInt(t.replace("\\",""),16))}catch(r){return t}return t}function q(e){let t=e.match(/url\((['"]?)(.*?)(\1)\)/);if(!t)return null;let r=t[2].trim();return r.startsWith("#")?null:r}function P(e,{timeout:t=3e3,useProxy:r=""}={}){function l(c){try{return new URL(c,window.location.href).origin===window.location.origin?"use-credentials":"anonymous"}catch(o){return"anonymous"}}function d(c){return g(this,null,function*(){let o=i=>fetch(i,{mode:"cors",credentials:l(i)==="use-credentials"?"include":"omit"}).then(p=>p.blob()).then(p=>new Promise((u,m)=>{let h=new FileReader;h.onloadend=()=>{let y=h.result;if(typeof y!="string"||!y.startsWith("data:image/")){m(new Error("Invalid image data URL"));return}u(y)},h.onerror=()=>m(new Error("FileReader error")),h.readAsDataURL(p)}));try{return yield o(c)}catch(i){if(r&&typeof r=="string"){let p=r.replace(/\/$/,"")+G(c);try{return yield o(p)}catch(u){throw new Error("[SnapDOM - fetchImage] CORS restrictions prevented image capture (even via proxy)")}}else throw new Error("[SnapDOM - fetchImage] Fetch fallback failed and no proxy provided")}})}let n=l(e);return f.image.has(e)?Promise.resolve(f.image.get(e)):e.startsWith("data:image/")?(f.image.set(e,e),Promise.resolve(e)):/\.svg(\?.*)?$/i.test(e)?g(null,null,function*(){try{let o=yield(yield fetch(e,{mode:"cors",credentials:n==="use-credentials"?"include":"omit"})).text(),i=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(o)}`;return f.image.set(e,i),i}catch(c){return d(e)}}):new Promise((c,o)=>{let i=setTimeout(()=>{o(new Error("[SnapDOM - fetchImage] Image load timed out"))},t),p=new Image;p.crossOrigin=n,p.onload=()=>g(null,null,function*(){clearTimeout(i);try{yield p.decode();let u=document.createElement("canvas");u.width=p.width,u.height=p.height,u.getContext("2d").drawImage(p,0,0,u.width,u.height);let h=u.toDataURL("image/png");f.image.set(e,h),c(h)}catch(u){try{let m=yield d(e);f.image.set(e,m),c(m)}catch(m){o(m)}}}),p.onerror=()=>g(null,null,function*(){clearTimeout(i),console.error(`[SnapDOM - fetchImage] Image failed to load: ${e}`);try{let u=yield d(e);f.image.set(e,u),c(u)}catch(u){o(u)}}),p.src=e})}function ae(e){let t={};for(let r of e)t[r]=e.getPropertyValue(r);return t}function Ee(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function ve(e){if(!e||e==="none")return"";let t=e.replace(/translate[XY]?\([^)]*\)/g,"");return t=t.replace(/matrix\(([^)]+)\)/g,(r,l)=>{let d=l.split(",").map(n=>n.trim());return d.length!==6?`matrix(${l})`:(d[4]="0",d[5]="0",`matrix(${d.join(", ")})`)}),t=t.replace(/matrix3d\(([^)]+)\)/g,(r,l)=>{let d=l.split(",").map(n=>n.trim());return d.length!==16?`matrix3d(${l})`:(d[12]="0",d[13]="0",`matrix3d(${d.join(", ")})`)}),t.trim().replace(/\s{2,}/g," ")}function G(e){if(/%[0-9A-Fa-f]{2}/.test(e))return e;try{return encodeURI(e)}catch(t){return e}}function O(e){let t=[],r=0,l=0;for(let d=0;d<e.length;d++){let n=e[d];n==="("&&r++,n===")"&&r--,n===","&&r===0&&(t.push(e.slice(l,d).trim()),l=d+1)}return t.push(e.slice(l).trim()),t}function _e(e){let t={},r=e.getPropertyValue("visibility");for(let l=0;l<e.length;l++){let d=e[l],n=e.getPropertyValue(d);(d==="background-image"||d==="content")&&n.includes("url(")&&!n.includes("data:")&&(n="none"),t[d]=n}return r==="hidden"&&(t.opacity="0"),t}function X(e,t,r){var c;if(e.tagName==="STYLE")return;f.preStyle.has(e)||f.preStyle.set(e,A(e));let l=f.preStyle.get(e);if(!f.snapshot.has(e)){let o=_e(l);f.snapshot.set(e,o)}let d=f.snapshot.get(e),n=Object.entries(d).sort(([o],[i])=>o.localeCompare(i)).map(([o,i])=>`${o}:${i}`).join(";");if(f.snapshotKey.has(n)){f.preStyleMap.set(t,f.snapshotKey.get(n));return}let a=((c=e.tagName)==null?void 0:c.toLowerCase())||"div",s=_(d,a,r);f.snapshotKey.set(n,s),f.preStyleMap.set(t,s)}function H(e,t,r={},l){var s,c;if(!e)throw new Error("Invalid node");let d=new Set,n=null;if(e.nodeType===Node.TEXT_NODE||e.nodeType!==Node.ELEMENT_NODE)return e.cloneNode(!0);if(e.getAttribute("data-capture")==="exclude"){let o=document.createElement("div"),i=e.getBoundingClientRect();return o.style.cssText=`display:inline-block;width:${i.width}px;height:${i.height}px;visibility:hidden;`,o}if(r.exclude&&Array.isArray(r.exclude))for(let o of r.exclude)try{if((s=e.matches)!=null&&s.call(e,o)){let i=document.createElement("div"),p=e.getBoundingClientRect();return i.style.cssText=`display:inline-block;width:${p.width}px;height:${p.height}px;visibility:hidden;`,i}}catch(i){console.warn(`Invalid selector in exclude option: ${o}`,i)}if(typeof r.filter=="function")try{if(!r.filter(e,l||e)){let o=document.createElement("div"),i=e.getBoundingClientRect();return o.style.cssText=`display:inline-block;width:${i.width}px;height:${i.height}px;visibility:hidden;`,o}}catch(o){console.warn("Error in filter function:",o)}if(e.tagName==="IFRAME"){let o=document.createElement("div");return o.style.cssText=`width:${e.offsetWidth}px;height:${e.offsetHeight}px;background-image:repeating-linear-gradient(45deg,#ddd,#ddd 5px,#f9f9f9 5px,#f9f9f9 10px);display:flex;align-items:center;justify-content:center;font-size:12px;color:#555;border:1px solid #aaa;`,o}if(e.getAttribute("data-capture")==="placeholder"){let o=e.cloneNode(!1);f.preNodeMap.set(o,e),X(e,o,t);let i=document.createElement("div");return i.textContent=e.getAttribute("data-placeholder-text")||"",i.style.cssText="color:#666;font-size:12px;text-align:center;line-height:1.4;padding:0.5em;box-sizing:border-box;",o.appendChild(i),o}if(e.tagName==="CANVAS"){let o=e.toDataURL(),i=document.createElement("img");return i.src=o,i.width=e.width,i.height=e.height,f.preNodeMap.set(i,e),X(e,i,t),i}let a;try{a=e.cloneNode(!1),f.preNodeMap.set(a,e)}catch(o){throw console.error("[Snapdom] Failed to clone node:",e,o),o}if(e instanceof HTMLTextAreaElement){a.textContent=e.value,a.value=e.value;let o=e.getBoundingClientRect();return a.style.width=`${o.width}px`,a.style.height=`${o.height}px`,a}if(e instanceof HTMLInputElement&&(a.value=e.value,a.setAttribute("value",e.value),e.checked!==void 0&&(a.checked=e.checked,e.checked&&a.setAttribute("checked",""),e.indeterminate&&(a.indeterminate=e.indeterminate))),e instanceof HTMLSelectElement&&(n=e.value),X(e,a,t),e.shadowRoot)if(Array.from(e.shadowRoot.querySelectorAll("slot")).length>0){for(let i of e.shadowRoot.childNodes)if(i.nodeType===Node.ELEMENT_NODE&&i.tagName==="STYLE"){let p=i.textContent||"";p.trim()&&t&&(f.preStyle||(f.preStyle=new WeakMap),f.preStyle.set(i,p))}}else{let i=document.createDocumentFragment();for(let p of e.shadowRoot.childNodes){if(p.nodeType===Node.ELEMENT_NODE&&p.tagName==="STYLE"){let m=p.textContent||"";m.trim()&&t&&(f.preStyle||(f.preStyle=new WeakMap),f.preStyle.set(p,m));continue}let u=H(p,t,r,l||e);u&&i.appendChild(u)}a.appendChild(i)}if(e.tagName==="SLOT"){let o=((c=e.assignedNodes)==null?void 0:c.call(e,{flatten:!0}))||[],i=o.length>0?o:Array.from(e.childNodes),p=document.createDocumentFragment();for(let u of i){let m=H(u,t,r,l||e);m&&p.appendChild(m)}return p}for(let o of e.childNodes){if(d.has(o))continue;let i=H(o,t,r,l||e);i&&a.appendChild(i)}if(n!==null&&a instanceof HTMLSelectElement){a.value=n;for(let o of a.options)o.value===n?o.setAttribute("selected",""):o.removeAttribute("selected")}return a}var qe=[/font\s*awesome/i,/material\s*icons/i,/ionicons/i,/glyphicons/i,/feather/i,/bootstrap\s*icons/i,/remix\s*icons/i,/heroicons/i,/layui/i,/lucide/i],re=[];function $e(e){let t=Array.isArray(e)?e:[e];for(let r of t)r instanceof RegExp?re.push(r):typeof r=="string"?re.push(new RegExp(r,"i")):console.warn("[snapdom] Ignored invalid iconFont value:",r)}function $(e){let t=typeof e=="string"?e:"",r=[...qe,...re];for(let l of r)if(l instanceof RegExp&&l.test(t))return!0;return!!(/icon/i.test(t)||/glyph/i.test(t)||/symbols/i.test(t)||/feather/i.test(t)||/fontawesome/i.test(t))}function ke(e,t,r,l=32,d="#000"){return g(this,null,function*(){t=t.replace(/^['"]+|['"]+$/g,"");let n=window.devicePixelRatio||1;yield document.fonts.ready;let a=document.createElement("span");a.textContent=e,a.style.position="absolute",a.style.visibility="hidden",a.style.fontFamily=`"${t}"`,a.style.fontWeight=r||"normal",a.style.fontSize=`${l}px`,a.style.lineHeight="1",a.style.whiteSpace="nowrap",a.style.padding="0",a.style.margin="0",document.body.appendChild(a);let s=a.getBoundingClientRect(),c=Math.ceil(s.width),o=Math.ceil(s.height);document.body.removeChild(a);let i=document.createElement("canvas");i.width=c*n,i.height=o*n;let p=i.getContext("2d");return p.scale(n,n),p.font=r?`${r} ${l}px "${t}"`:`${l}px "${t}"`,p.textAlign="left",p.textBaseline="top",p.fillStyle=d,p.fillText(e,0,0),{dataUrl:i.toDataURL(),width:c,height:o}})}function Ie(e){return Array.from(document.styleSheets).some(t=>t.href===e)}function He(e){return new Promise(t=>{if(Ie(e))return t(null);let r=document.createElement("link");r.rel="stylesheet",r.href=e,r.setAttribute("data-snapdom","injected-import"),r.onload=()=>t(r),r.onerror=()=>t(null),document.head.appendChild(r)})}function J(){return g(this,arguments,function*({preCached:e=!1}={}){if(f.resource.has("fonts-embed-css")){if(e){let n=document.createElement("style");n.setAttribute("data-snapdom","embedFonts"),n.textContent=f.resource.get("fonts-embed-css"),document.head.appendChild(n)}return f.resource.get("fonts-embed-css")}let t=/@import\s+url\(["']?([^"')]+)["']?\)/g,r=[];for(let n of document.querySelectorAll("style")){let a=n.textContent||"",s=Array.from(a.matchAll(t));for(let c of s){let o=c[1];$(o)||Ie(o)||r.push(o)}}yield Promise.all(r.map(He));let l=Array.from(document.querySelectorAll('link[rel="stylesheet"]')).filter(n=>n.href),d="";for(let n of l)try{let s=yield(yield fetch(n.href)).text();if($(n.href)||$(s))continue;let c=/url\((["']?)([^"')]+)\1\)/g,o=yield Promise.all(Array.from(s.matchAll(c)).map(p=>g(null,null,function*(){let u=q(p[0]);if(!u)return null;let m=u;if(!m.startsWith("http")&&!m.startsWith("data:")&&(m=new URL(m,n.href).href),$(m))return null;if(f.resource.has(m))return f.font.add(m),{original:p[0],inlined:`url(${f.resource.get(m)})`};if(f.font.has(m))return null;try{let y=yield(yield fetch(m)).blob(),S=yield new Promise(w=>{let b=new FileReader;b.onload=()=>w(b.result),b.readAsDataURL(y)});return f.resource.set(m,S),f.font.add(m),{original:p[0],inlined:`url(${S})`}}catch(h){return console.warn("[snapdom] Failed to fetch font resource:",m),null}}))),i=s;for(let p of o)p&&(i=i.replace(p.original,p.inlined));d+=i+`
`}catch(a){console.warn("[snapdom] Failed to fetch CSS:",n.href)}for(let n of document.styleSheets)try{if(!n.href||l.every(a=>a.href!==n.href)){for(let a of n.cssRules)if(a.type===CSSRule.FONT_FACE_RULE){let s=a.style.getPropertyValue("src"),c=a.style.getPropertyValue("font-family");if(!s||$(c))continue;let o=/url\((["']?)([^"')]+)\1\)/g,i=/local\((["']?)[^)]+?\1\)/g,p=!!s.match(o),u=!!s.match(i);if(!p&&u){d+=`@font-face{font-family:${c};src:${s};font-style:${a.style.getPropertyValue("font-style")||"normal"};font-weight:${a.style.getPropertyValue("font-weight")||"normal"};}`;continue}let m=s,h=Array.from(s.matchAll(o));for(let y of h){let S=y[2].trim();if(!S)continue;let w=S;if(!w.startsWith("http")&&!w.startsWith("data:")&&(w=new URL(w,n.href||location.href).href),!$(w)){if(f.resource.has(w)){f.font.add(w),m=m.replace(y[0],`url(${f.resource.get(w)})`);continue}if(!f.font.has(w))try{let T=yield(yield fetch(w)).blob(),k=yield new Promise(F=>{let I=new FileReader;I.onload=()=>F(I.result),I.readAsDataURL(T)});f.resource.set(w,k),f.font.add(w),m=m.replace(y[0],`url(${k})`)}catch(b){console.warn("[snapdom] Failed to fetch font URL:",w)}}}d+=`@font-face{font-family:${c};src:${m};font-style:${a.style.getPropertyValue("font-style")||"normal"};font-weight:${a.style.getPropertyValue("font-weight")||"normal"};}`}}}catch(a){console.warn("[snapdom] Cannot access stylesheet",n.href,a)}for(let n of document.fonts)if(n.family&&n.status==="loaded"&&n._snapdomSrc){if($(n.family))continue;let a=n._snapdomSrc;if(!a.startsWith("data:")){if(f.resource.has(n._snapdomSrc))a=f.resource.get(n._snapdomSrc),f.font.add(n._snapdomSrc);else if(!f.font.has(n._snapdomSrc))try{let c=yield(yield fetch(n._snapdomSrc)).blob();a=yield new Promise(o=>{let i=new FileReader;i.onload=()=>o(i.result),i.readAsDataURL(c)}),f.resource.set(n._snapdomSrc,a),f.font.add(n._snapdomSrc)}catch(s){console.warn("[snapdom] Failed to fetch dynamic font src:",n._snapdomSrc);continue}}d+=`@font-face{font-family:'${n.family}';src:url(${a});font-style:${n.style||"normal"};font-weight:${n.weight||"normal"};}`}if(d&&(f.resource.set("fonts-embed-css",d),e)){let n=document.createElement("style");n.setAttribute("data-snapdom","embedFonts"),n.textContent=d,document.head.appendChild(n)}return d})}function se(e,t,r){return g(this,null,function*(){var n;if(!(e instanceof Element)||!(t instanceof Element))return;for(let a of["::before","::after","::first-letter"])try{let s=A(e,a);if(!s||typeof s[Symbol.iterator]!="function"||s.content==="none"&&s.backgroundImage==="none"&&s.backgroundColor==="transparent"&&(s.borderStyle==="none"||parseFloat(s.borderWidth)===0)&&(!s.transform||s.transform==="none")&&s.display==="inline")continue;if(a==="::first-letter"){let E=getComputedStyle(e);if(!(s.color!==E.color||s.fontSize!==E.fontSize||s.fontWeight!==E.fontWeight))continue;let L=Array.from(t.childNodes).find(pe=>{var me;return pe.nodeType===Node.TEXT_NODE&&((me=pe.textContent)==null?void 0:me.trim().length)>0});if(!L)continue;let U=L.textContent,ne=U.match(/^([^\p{L}\p{N}\s]*[\p{L}\p{N}](?:['â€™])?)/u),B=ne==null?void 0:ne[0],Ue=U.slice((B==null?void 0:B.length)||0);if(!B||/[\uD800-\uDFFF]/.test(B))continue;let K=document.createElement("span");K.textContent=B,K.dataset.snapdomPseudo="::first-letter";let Be=ae(s),We=_(Be,"span",r);f.preStyleMap.set(K,We);let fe=document.createTextNode(Ue);t.replaceChild(fe,L),t.insertBefore(K,fe);continue}let o=s.content,i=/counter\s*\(|counters\s*\(/.test(o)?"- ":Ce(o),p=s.backgroundImage,u=s.backgroundColor,m=s.fontFamily,h=parseInt(s.fontSize)||32,y=parseInt(s.fontWeight)||!1,S=s.color||"#000",w=s.display,b=parseFloat(s.width),T=parseFloat(s.height),k=s.borderStyle,F=parseFloat(s.borderWidth),I=s.transform,N=$(m),j=o!=="none"&&i!=="",z=p&&p!=="none",V=u&&u!=="transparent"&&u!=="rgba(0, 0, 0, 0)",Q=w!=="inline"&&(b>0||T>0),Z=k&&k!=="none"&&F>0,M=I&&I!=="none";if(!(j||z||V||Q||Z||M))continue;let C=document.createElement("span");C.dataset.snapdomPseudo=a,C.style.verticalAlign="middle";let ee=ae(s),te=_(ee,"span",r);if(f.preStyleMap.set(C,te),N&&i.length===1){let{dataUrl:E,width:v,height:L}=yield ke(i,m,y,h,S),U=document.createElement("img");U.src=E,U.style=`height:${h}px;width:${v/L*h}px;object-fit:contain;`,C.appendChild(U),t.dataset.snapdomHasIcon="true"}else if(i.startsWith("url(")){let E=q(i);if(E!=null&&E.trim())try{let v=document.createElement("img"),L=yield P(G(E),r);v.src=L,v.style=`width:${h}px;height:auto;object-fit:contain;`,C.appendChild(v)}catch(v){console.error(`[snapdom] Error in pseudo ${a} for`,e,v)}}else!N&&j&&(C.textContent=i);if(z)try{let E=O(p),v=yield Promise.all(E.map(W));C.style.backgroundImage=v.join(", ")}catch(E){console.warn(`[snapdom] Failed to inline background-image for ${a}`,E)}if(V&&(C.style.backgroundColor=u),!(C.childNodes.length>0||((n=C.textContent)==null?void 0:n.trim())!==""||z||V||Q||Z||M))continue;a==="::before"?t.insertBefore(C,t.firstChild):t.appendChild(C)}catch(s){console.warn(`[snapdom] Failed to capture ${a} for`,e,s)}let l=Array.from(e.children),d=Array.from(t.children).filter(a=>!a.dataset.snapdomPseudo);for(let a=0;a<Math.min(l.length,d.length);a++)yield se(l[a],d[a],r)})}function Re(e){if(!e)return;let t=new Set;if(e.querySelectorAll("use").forEach(s=>{let c=s.getAttribute("xlink:href")||s.getAttribute("href");c&&c.startsWith("#")&&t.add(c.slice(1))}),!t.size)return;let r=Array.from(document.querySelectorAll("svg > symbol, svg > defs")),l=r.filter(s=>s.tagName.toLowerCase()==="symbol"),d=r.filter(s=>s.tagName.toLowerCase()==="defs"),n=e.querySelector("svg.inline-defs-container");n||(n=document.createElementNS("http://www.w3.org/2000/svg","svg"),n.setAttribute("aria-hidden","true"),n.setAttribute("style","position: absolute; width: 0; height: 0; overflow: hidden;"),n.classList.add("inline-defs-container"),e.insertBefore(n,e.firstChild));let a=new Set;e.querySelectorAll("symbol[id], defs > *[id]").forEach(s=>{a.add(s.id)}),t.forEach(s=>{if(a.has(s))return;let c=l.find(o=>o.id===s);if(c){n.appendChild(c.cloneNode(!0)),a.add(s);return}for(let o of d){let i=o.querySelector(`#${CSS.escape(s)}`);if(i){let p=n.querySelector("defs");p||(p=document.createElementNS("http://www.w3.org/2000/svg","defs"),n.appendChild(p)),p.appendChild(i.cloneNode(!0)),a.add(s);break}}})}function Ne(d){return g(this,arguments,function*(e,t=!1,r=!1,l={}){var s,c;let n,a="";ze(e);try{Re(e)}catch(o){console.warn("inlineExternal defs or symbol failed:",o)}try{n=H(e,t,l,e)}catch(o){throw console.warn("deepClone failed:",o),o}try{yield se(e,n,t,r,l.useProxy)}catch(o){console.warn("inlinePseudoElements failed:",o)}if(t){let o=xe();a=Array.from(o.entries()).map(([i,p])=>`.${p}{${i}}`).join("");for(let[i,p]of f.preStyleMap.entries()){if(i.tagName==="STYLE")continue;if(i.getRootNode&&i.getRootNode()instanceof ShadowRoot){i.setAttribute("style",p.replace(/;/g,"; "));continue}let u=o.get(p);u&&i.classList.add(u);let m=(s=i.style)==null?void 0:s.backgroundImage,h=(c=i.dataset)==null?void 0:c.snapdomHasIcon;m&&m!=="none"&&(i.style.backgroundImage=m),h&&(i.style.verticalAlign="middle",i.style.display="inline")}}else for(let[o,i]of f.preStyleMap.entries())o.tagName!=="STYLE"&&o.setAttribute("style",i.replace(/;/g,"; "));for(let[o,i]of f.preNodeMap.entries()){let p=i.scrollLeft,u=i.scrollTop;if((p||u)&&o instanceof HTMLElement){o.style.overflow="hidden",o.style.scrollbarWidth="none",o.style.msOverflowStyle="none";let h=document.createElement("div");for(h.style.transform=`translate(${-p}px, ${-u}px)`,h.style.willChange="transform",h.style.display="inline-block",h.style.width="100%";o.firstChild;)h.appendChild(o.firstChild);o.appendChild(h)}}if(e===f.preNodeMap.get(n)){let o=f.preStyle.get(e)||window.getComputedStyle(e);f.preStyle.set(e,o);let i=ve(o.transform);n.style.margin="0",n.style.position="static",n.style.top="auto",n.style.left="auto",n.style.right="auto",n.style.bottom="auto",n.style.zIndex="auto",n.style.float="none",n.style.clear="none",n.style.transform=i||""}for(let[o,i]of f.preNodeMap.entries())i.tagName==="PRE"&&(o.style.marginTop="0",o.style.marginBlockStart="0");return{clone:n,classCSS:a}})}function ze(e){let t=getComputedStyle(e),r=t.outlineStyle,l=t.outlineWidth,d=t.borderStyle,n=t.borderWidth,a=r!=="none"&&parseFloat(l)>0,s=d==="none"||parseFloat(n)===0;a&&s&&(e.style.border=`${l} solid transparent`)}function Ae(r){return g(this,arguments,function*(e,t={}){let l=Array.from(e.querySelectorAll("img")),d=n=>g(null,null,function*(){let a=n.src;try{let s=yield P(a,{useProxy:t.useProxy});n.src=s,n.width||(n.width=n.naturalWidth||100),n.height||(n.height=n.naturalHeight||100)}catch(s){let c=document.createElement("div");c.style=`width: ${n.width||100}px; height: ${n.height||100}px; background: #ccc; display: inline-block; text-align: center; line-height: ${n.height||100}px; color: #666; font-size: 12px;`,c.innerText="img",n.replaceWith(c)}});for(let n=0;n<l.length;n+=4){let a=l.slice(n,n+4).map(d);yield Promise.allSettled(a)}})}function Te(l,d){return g(this,arguments,function*(e,t,r={}){let n=[[e,t]],a=["background-image","mask","mask-image","-webkit-mask-image","mask-source","mask-box-image-source","mask-border-source","-webkit-mask-box-image-source","border-image","border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat"];for(;n.length;){let[s,c]=n.shift(),o=f.preStyle.get(s)||A(s);f.preStyle.has(s)||f.preStyle.set(s,o);let i=(()=>{let h=o.getPropertyValue("border-image"),y=o.getPropertyValue("border-image-source");return h&&h!=="none"||y&&y!=="none"})();for(let h of a){if(["border-image-slice","border-image-width","border-image-outset","border-image-repeat"].includes(h)&&!i)continue;let y=o.getPropertyValue(h);if(!y||y==="none")continue;let S=O(y),w=yield Promise.all(S.map(b=>W(b,r)));w.some(b=>b&&b!=="none"&&!/^url\(undefined/.test(b))&&c.style.setProperty(h,w.join(", "))}let p=o.getPropertyValue("background-color");p&&p!=="transparent"&&p!=="rgba(0, 0, 0, 0)"&&(c.style.backgroundColor=p);let u=Array.from(s.children),m=Array.from(c.children);for(let h=0;h<Math.min(u.length,m.length);h++)n.push([u[h],m[h]])}})}function Me(r){return g(this,arguments,function*(e,t={}){if(!e)throw new Error("Element cannot be null or undefined");f.reset();let{compress:l=!0,embedFonts:d=!1,fast:n=!0,scale:a=1,useProxy:s=""}=t,c,o,i="",p="",u,m;if({clone:c,classCSS:o}=yield Ne(e,l,d,t),yield new Promise(y=>{D(()=>g(null,null,function*(){yield Ae(c,t),y()}),{fast:n})}),yield new Promise(y=>{D(()=>g(null,null,function*(){yield Te(e,c,t),y()}),{fast:n})}),d&&(yield new Promise(y=>{D(()=>g(null,null,function*(){i=yield J(),y()}),{fast:n})})),l){let y=be(c).sort(),S=y.join(",");f.baseStyle.has(S)?p=f.baseStyle.get(S):yield new Promise(w=>{D(()=>{p=Se(y),f.baseStyle.set(S,p),w()},{fast:n})})}yield new Promise(y=>{D(()=>{let S=e.getBoundingClientRect(),w=S.width,b=S.height,T=Number.isFinite(t.width),k=Number.isFinite(t.height),F=typeof a=="number"&&a!==1;if(!F){let M=S.width/S.height;T&&k?(w=t.width,b=t.height):T?(w=t.width,b=w/M):k&&(b=t.height,w=b*M)}if(w=Math.ceil(w),b=Math.ceil(b),c.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),c.style.transformOrigin="top left",!F&&(T||k)){let M=S.width,le=S.height,C=w/M,ee=b/le,te=c.style.transform||"",de=`scale(${C}, ${ee})`;c.style.transform=`${de} ${te}`.trim()}let I="http://www.w3.org/2000/svg",N=document.createElementNS(I,"foreignObject");N.setAttribute("width","100%"),N.setAttribute("height","100%");let j=document.createElement("style");j.textContent=p+i+"svg{overflow:visible;}"+o,N.appendChild(j),N.appendChild(c);let V=new XMLSerializer().serializeToString(N);m=`<svg xmlns="${I}" width="${w}" height="${b}" viewBox="0 0 ${w} ${b}">`+V+"</svg>",u=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(m)}`,y()},{fast:n})});let h=document.getElementById("snapdom-sandbox");return h&&h.style.position==="absolute"&&h.remove(),u})}function Ke(r){return g(this,arguments,function*(e,{scale:t=1}={}){let l=new Image;return l.src=e,yield l.decode(),t!==1&&(l.style.width=`${l.naturalWidth*t}px`,l.style.height=`${l.naturalHeight*t}px`),l})}function Le(l){return g(this,arguments,function*(e,{dpr:t=1,scale:r=1}={}){let d=new Image;d.src=e,d.crossOrigin="anonymous",d.loading="eager",d.decoding="sync";let n=Ee(),a=!1;if(n&&(document.body.appendChild(d),a=!0),yield d.decode(),n&&(yield new Promise(p=>setTimeout(p,100))),d.width===0||d.height===0)throw a&&d.remove(),new Error("Image failed to load or has no dimensions");let s=d.naturalWidth*r,c=d.naturalHeight*r,o=document.createElement("canvas");o.width=Math.ceil(s*t),o.height=Math.ceil(c*t),o.style.width=`${s}px`,o.style.height=`${c}px`;let i=o.getContext("2d");return i.scale(t,t),i.drawImage(d,0,0,s,c),a&&d.remove(),o})}function Pe(n){return g(this,arguments,function*(e,{type:t="svg",scale:r=1,backgroundColor:l="#fff",quality:d}={}){let a={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",webp:"image/webp"}[t]||"image/png";if(t==="svg"){let c=decodeURIComponent(e.split(",")[1]);return new Blob([c],{type:"image/svg+xml"})}let s=yield ce(e,{dpr:1,scale:r},l);return new Promise(c=>{s.toBlob(o=>c(o),`${a}`,d)})})}function ce(d,n,a){return g(this,arguments,function*(e,{dpr:t=1,scale:r=1},l){let s=yield Le(e,{dpr:t,scale:r});if(!l)return s;let c=document.createElement("canvas");c.width=s.width,c.height=s.height;let o=c.getContext("2d");return o.fillStyle=l,o.fillRect(0,0,c.width,c.height),o.drawImage(s,0,0),c})}function ie(a,s){return g(this,arguments,function*(e,{dpr:t=1,scale:r=1,backgroundColor:l,quality:d},n="png"){let c=["jpg","jpeg","webp"].includes(n)?"#fff":void 0,o=l!=null?l:c,i=yield ce(e,{dpr:t,scale:r},o),p=new Image;return p.src=i.toDataURL(`image/${n}`,d),yield p.decode(),p.style.width=`${i.width/t}px`,p.style.height=`${i.height/t}px`,p})}function Ye(a){return g(this,arguments,function*(e,{dpr:t=1,scale:r=1,backgroundColor:l,format:d="png",filename:n="snapDOM"}={}){if(d==="svg"){let m=yield Pe(e),h=URL.createObjectURL(m),y=document.createElement("a");y.href=h,y.download=`${n}.svg`,y.click(),URL.revokeObjectURL(h);return}let s=["jpg","jpeg","webp"].includes(d)?"#fff":void 0,c=l!=null?l:s,o=yield ce(e,{dpr:t,scale:r},c),i={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",webp:"image/webp"}[d]||"image/png",p=o.toDataURL(i),u=document.createElement("a");u.href=p,u.download=`${n}.${d}`,u.click()})}function x(r){return g(this,arguments,function*(e,t={}){if(t=R({scale:1},t),!e)throw new Error("Element cannot be null or undefined");return t.iconFonts&&$e(t.iconFonts),yield x.capture(e,t)})}x.capture=(r,...l)=>g(null,[r,...l],function*(e,t={}){var s;let d=yield Me(e,t),n=(s=t.dpr)!=null?s:window.devicePixelRatio||1,a=t.scale||1;return{url:d,options:t,toRaw:()=>d,toImg:(c={})=>Ke(d,R({dpr:n,scale:a},c)),toCanvas:(c={})=>Le(d,R({dpr:n,scale:a},c)),toBlob:(c={})=>Pe(d,R({dpr:n,scale:a},c)),toPng:(c={})=>ie(d,R({dpr:n,scale:a},c),"png"),toJpg:(c={})=>ie(d,R({dpr:n,scale:a},c),"jpeg"),toWebp:(c={})=>ie(d,R({dpr:n,scale:a},c),"webp"),download:(u={})=>{var m=u,{format:c="png",filename:o="snapDOM",backgroundColor:i}=m,p=oe(m,["format","filename","backgroundColor"]);return Ye(d,R({dpr:n,scale:a,format:c,filename:o,backgroundColor:i},p))}}});x.toRaw=(e,t)=>g(null,null,function*(){return(yield x.capture(e,t)).toRaw()});x.toImg=(e,t)=>g(null,null,function*(){return(yield x.capture(e,t)).toImg()});x.toCanvas=(e,t)=>g(null,null,function*(){return(yield x.capture(e,t)).toCanvas()});x.toBlob=(e,t)=>g(null,null,function*(){return(yield x.capture(e,t)).toBlob(t)});x.toPng=(e,t)=>g(null,null,function*(){return(yield x.capture(e,t)).toPng(t)});x.toJpg=(e,t)=>g(null,null,function*(){return(yield x.capture(e,t)).toJpg(t)});x.toWebp=(e,t)=>g(null,null,function*(){return(yield x.capture(e,t)).toWebp(t)});x.download=(r,...l)=>g(null,[r,...l],function*(e,t={}){let o=t,{format:d="png",filename:n="capture",backgroundColor:a}=o,s=oe(o,["format","filename","backgroundColor"]);return yield(yield x.capture(e,s)).download({format:d,filename:n,backgroundColor:a})});function Fe(){return g(this,arguments,function*(e=document,t={}){let{embedFonts:r=!0,reset:l=!1}=t;if(l){f.reset();return}yield document.fonts.ready,ye();let d=[],n=[];e!=null&&e.querySelectorAll&&(d=Array.from(e.querySelectorAll("img[src]")),n=Array.from(e.querySelectorAll("*")));let a=[];for(let s of d){let c=s.src;f.image.has(c)||a.push(P(c,{useProxy:t.useProxy}).then(o=>f.image.set(c,o)).catch(()=>{}))}for(let s of n){let c=A(s).backgroundImage;if(c&&c!=="none"){let o=O(c);for(let i of o)i.startsWith("url(")&&a.push(W(i,t).catch(()=>{}))}}r&&(yield J({preCached:!0})),yield Promise.all(a)})}typeof window!="undefined"&&(window.snapdom=x,window.preCache=Fe);})();